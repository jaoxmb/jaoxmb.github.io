<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MINUTA</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/2.21.0/css/uikit.almost-flat.min.css" />
    <style>
      /* FORMULARIO */
      @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&display=swap');

      body,
      html {
        font-family: 'Roboto', sans-serif !important;
        width: 100%;
        background: white;
        font-size: 16px;
        font-weight: 400;
        scroll-behavior: smooth;
      }
      body{
        overflow-x: hidden;
        overflow-y: overlay;
      }

      .bt-form__wrapper {
        /* margin: 0px auto; */
        max-width: 500px;
        width: 100%;
        position: absolute;
        left: 50%;
        top: 0%;
        -webkit-transform: translate(-50%, -0%);
        -ms-transform: translate(-50%, -0%);
        transform: translate(-50%, -0%);
        transition: all 0.3s;
      }
      .bt-form__wrapper input[type],
      .bt-form__wrapper textarea, .bt-form__wrapper select {
        position: relative;
        width: auto;
        min-height: 52px;
        border: none !important;
        outline: none !important;
        padding: 0 20px;
        background: #e9e9eb;
        border-radius: 10px;
        z-index: 1;
        font-size: 16px;
        -webkit-transition: background 0.3s cubic-bezier(0.215, 0.61, 0.355, 1), border-color 0.3s cubic-bezier(0.215, 0.61, 0.355, 1);
        -o-transition: background 0.3s cubic-bezier(0.215, 0.61, 0.355, 1), border-color 0.3s cubic-bezier(0.215, 0.61, 0.355, 1);
        transition: background 0.3s cubic-bezier(0.215, 0.61, 0.355, 1), border-color 0.3s cubic-bezier(0.215, 0.61, 0.355, 1);
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
      }
      .bt-form__wrapper input[type]::placeholder{
          color: #999999 !important;
      }
      .bt-form__wrapper input[type]::-webkit-inner-spin-button,
      .bt-form__wrapper input[type]::-webkit-calendar-picker-indicator {
           display: none;
           -webkit-appearance: none;
        }
      .bt-form__wrapper select{
        background: url(https://svgshare.com/i/Zko.svg) no-repeat #e9e9eb;
        background-position: calc(100% - 11px) center;
        background-size: 22px;
      }
      .bt-form__wrapper textarea {
        resize: vertical;
        height: 100px;
        padding: 15px 20px;
      }
      .bt-form__wrapper input[type]:focus {
        background: #476cf421;
      }
      .bt-form__wrapper textarea:focus {
        background: #476cf421;
      }
      .bt-form__wrapper select:focus {
        background: url(https://svgshare.com/i/Zko.svg) no-repeat #476cf421;
        background-position: calc(100% - 11px) center;
        background-size: 22px
      }
      .bt-flabels > *:not(:first-child).bt-flabels__wrapper,
      .bt-flabels > *:not(:first-child) .bt-flabels__wrapper {
        border-top: none;
      }
      .bt-flabels__wrapper {
        position: relative;
      }
      .bt-flabels__error{
        background: #ffd1d1 !important;
      }
      .bt-flabels--right {
        border-left: none;
      }
      .bt-flabel__float label {
        opacity: 1;
        -webkit-transform: translateY(0);
        -ms-transform: translateY(0);
        transform: translateY(0);
      }
      .bt-flabel__float input[type] {
        padding-top: 9px;
      }
      .bt-flabels__wrapper {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-orient: vertical;
        -webkit-box-direction: normal;
        -ms-flex-direction: column;
        flex-direction: column;
      }
      .bt-flabels__wrapper label {
        padding-bottom: 4px;
        color: #999999;
      }
      .contagem_diarias {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-pack: justify;
        -ms-flex-pack: justify;
        justify-content: space-between;
        padding: 20px 30px 13px 30px;
    margin-bottom: 10px;
    border-bottom: 1px solid #d1d1d1
      }
      .contagem_diarias h4 {
        font-size: 19px;
        font-weight: 700;
        margin: 0;
      }
      .contagem_diarias h4 i {
        font-style: normal;
      }
      .contagem_diarias .remove-diaria {
        cursor: pointer;
      }
      .elbtn {
        width: 100%;
        border: none;
        color: white;
        padding: 18px 0px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 14px;
        -webkit-transition-duration: 0.4s;
        -o-transition-duration: 0.4s;
        transition-duration: 0.4s;
        cursor: pointer;
        border-radius: 10px;
        background-color: #353739;
        
      }

      .btn button:hover,.elbtn:hover {
        background-color: #515457;
        color: white;
      }
      .diaria {
        background: white;
        margin-bottom: 20px;
        border-radius: 20px;
      }
      .diaria:last-child {
        margin-bottom: 0px;
}
      .diarias {
        background: #e9e9eb;
        position: relative;
        padding: 45px 34px 70px 34px !important;
        overflow: hidden;
      }

      .diaria .uk-form.bt-flabels.js-flabels {
    padding: 0px 30px 30px 30px;
}
      .bt-flabels__wrapper {
        padding: 4px;
      }
      .part {
        padding: 30px 30px 0px 30px;
        border-radius: 30px 30px 0px 0px;
      }
      .part-title{
    display: flex;
    justify-content: space-between;
    padding: 4px;
    align-items: center;
    margin-bottom: 25px;
      }
      .part-title p{
        font-size: 30px;
        font-weight: 600;
        margin: 0px;
        text-align: left;
      }
      .part-title img{
        width: 25px;
        cursor: pointer;
      }
      #formulario{
        display: block;
    width: 100%;
    height: 100%;
    top: 0px;
    left: 0px;
      }
      #formulario .bt-form__wrapper{
        background: white;
      }
      .form_header.part {
        height: 110px;
    background: #353739;
    border-radius: 0px;
    margin-bottom: -30px;
    padding-bottom: 40px;
      }
      .form_header.part p {
        color: white;
    padding: 50px 0px 0px 0px;
    font-size: 27px;
    font-weight: 500;
    line-height: 26px;
      }
      .finalizacao.part {
        background: white;
        padding: 30px 30px 100px 30px;
        position: relative;
        margin-top: -30px;
      }
      #mindownload a{
        padding: 15px 0px;
    width: calc(50% - 4px);
    text-align: center;
    border-radius: 10px;
    text-decoration: none;
      }
      #mindownload a:last-child{
        background: #e9e9eb;
    color: black;
      }
      #mindownload a:last-child:hover{
        background: #cccccc;
    color: black;
      }
      #mindownload .bt-form__wrapper {
        position: absolute;
    background: white;
    top: 120%;
    border-radius: 30px 30px 0px 0px;
    transition: all 0.3s;
    padding: 0px;
    display: none;
    min-height: 480px;
    box-shadow: white 0px 436px 0px;
      }
      /* #mindownload .bt-form__wrapper::before {
    content: '';
    display: block;
    position: absolute;
    width: 25%;
    height: 5px;
    background: #cacaca;
    border-radius: 100px;
    left: calc(50% - 12.5%);
    top: 13px;
} */
#mindownload .bt-flabels__wrapper{
    display: flex;
    flex-direction: row;
    justify-content: space-between;
}
      #mindownload .part {
        border-radius: 0px;
        padding: 45px 30px 45px 30px;
      }
      #minuta-demo{
        border-radius: 10px;
        box-shadow: rgb(0 0 0 / 25%) 0px 28px 54px -20px, rgb(0 0 0 / 10%) 0px 28px 50px;
      }

.inf-importantes.part {
    padding: 30px 30px 40px 30px;
    background: white;
}

ul#d_tipoMinuta {
    position: relative;
    margin: 0;
    padding: 0;
    border-radius: 10px;
    overflow: hidden;
    display: flex;
    width: 100%;
}

ul#d_tipoMinuta>li.selected {
  color: white;
}

ul#d_tipoMinuta>li {
  display: inline-block;
  padding: 15px 0px;
  margin: 0;
  width: 100%;
  text-align: center;
  z-index: 1;
  border-radius: 10px;
}

ul#d_tipoMinuta>li:not(.selected):not(#nav_indicator):not(#nav-background):hover {
  background: #476cf421;
}

ul#d_tipoMinuta>li:not(#nav_indicator) {
  cursor: pointer;
  -webkit-transition: all 0.3s cubic-bezier(0.215, 0.61, 0.355, 1);
        -o-transition: all 0.3s cubic-bezier(0.215, 0.61, 0.355, 1);
        transition: all 0.3s cubic-bezier(0.215, 0.61, 0.355, 1);
}

ul#d_tipoMinuta>li#nav_indicator {
  position: absolute;
  display: inline-block;
  width: 0px;
  /* kept hidden until script applies width and paddings */
  padding: 0;
  background-color: #353739;
  bottom: 0;
  height: 100%;
  transition-property: left, width;
  transition-duration: 0.3s, 0.3s;
  z-index:0;
  border-radius: 10px;
}
ul#d_tipoMinuta #nav-background{
   width: 100%;
  height: 100%;
  background: #e9e9eb;
  position: absolute;
  z-index: 0;
}
div#close-pdfdownload {
    width: 100%;
    height: 100%;
    background: transparent;
    position: fixed;
    transition: all 0.3s;
}
#send-form{
    position: fixed;
    top: calc(100% - 70px);
    width: 100%;
    height: 100%;
}
#send-form .elbtn {
    box-shadow: 0px 4px 25px -4px #353739;
}
#send-form .bt-form__wrapper{
  background: transparent;
  height: 40px;
}
#send-form .bt-flabels__wrapper{
  display: flex;
  flex-direction: row;
}
#send-form .bt-flabels__wrapper button:first-child{
  width: 60px;
  margin-right: 10px;
  padding: 0px;
}
#send-form .part{
    padding: 0px 30px 0px 30px;
    height: 100%;
}
#send-form .uk-form{
  position: relative;
    left: 50%;
    top: 50%;
    transform: translate(-50%,-50%);
}


.lds-ring {
  display: block;
    position: fixed;
    width: 80px;
    height: 80px;
    top: 50%;
    left: 50%;
    transform: translate(-50%,-50%);
    display: none;
}
.lds-ring div {
  box-sizing: border-box;
  display: block;
  position: absolute;
  width: 64px;
  height: 64px;
  margin: 8px;
  border: 8px solid #fff;
  border-radius: 50%;
  animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
  border-color: #fff transparent transparent transparent;
}
.lds-ring div:nth-child(1) {
  animation-delay: -0.45s;
}
.lds-ring div:nth-child(2) {
  animation-delay: -0.3s;
}
.lds-ring div:nth-child(3) {
  animation-delay: -0.15s;
}
@keyframes lds-ring {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
      /* FORMULARIO END */

      /* MINUTA */
      #printContent {
        background: white;
        width: 1024px;
        height: 602px;
        position: fixed;
        z-index: 0;
        color: black;
      }
      #printContent:after {
        content: "";
        width: 166px;
        height: 100%;
        background: #c9c9c9;
        position: absolute;
      }
      #diarias {
        border-collapse: collapse;
        width: 100%;
        font-size: 16px !important;
      }
      .table-diarias{
        position: absolute;
    width: 964px;
    left: 30px;
    top: 263px;
    z-index: 1;
    border-radius: 15px;
    border: 1px solid;
    overflow: hidden;
      }
      #diarias td,
      #diarias th {
        border-right: 1px solid black;
        border-bottom: 1px solid black;
        text-align: center;
        padding: 2px;
      }
      #diarias td:last-child, #diarias th:last-child {
        border-right: none;
      }
      #diarias tr {
        background-color: #f2f2f2;
      }

      #diarias th {
        background-color: #c9c9c9;
        color: #050506;
        font-weight: 500;
      }
      .logo {
        position: absolute;
        z-index: 1;
        top: 45px;
        left: 30px;
      }
      .logo h2 {
        margin: 0px;
        padding: 0px;
        font-weight: 700;
        font-size: 29px;
      }
      .logo h4 {
        margin: 0;
        padding: 0px;
        font-size: 19px;
        font-weight: 500;
      }
      .dados-pessoais {
        position: absolute;
        z-index: 1;
        left: 490px;
        top: 37px;
        color: black !important;
        text-decoration: none !important;
      }
      .dados-pessoais p {
        margin: 0px;
        font-size: 14px;
        font-weight: bold;
      }
      #dados-primarios {
        border-collapse: collapse;
        width: 964px;
        font-size: 16px !important;
        position: absolute;
        z-index: 1;
        left: 30px;
        top: 165px;
      }

      #dados-primarios td,
      #dados-primarios th {
        border-bottom: 1px solid black;
        text-align: center;
        padding: 2px;
      }

      #data-minuta {
        border-collapse: collapse;
        width: 964px;
        font-size: 16px !important;
        position: absolute;
        z-index: 1;
        left: 30px;
        top: 531px;
      }

      #data-minuta td,
      #data-minuta th {
        border-bottom: 1px solid black;
        text-align: center;
        padding: 2px;
      }
      .m_valhoratext{
        text-align: right !important;
      }
      #m_valorhora{
        text-align: left !important;
        padding-left: 10px !important;
      }
      /* MINUTA END */

      div#background {
        position: fixed;
        width: 100%;
        height: 100%;
        background: white;
        top: 0px;
        left: 0px;
      }


      /* carousel */
      .owl-item > div {
  cursor: pointer;
  transition: all 0.4s ease;
  transform: scale(0.9);
  opacity: 0.8;
}
.owl-item.center > div {
  cursor: auto;
  margin: 0;
  transform: scale(1);
  opacity: 1;
  box-shadow: rgb(0 0 0 / 0%) 0px 28px 54px -20px, rgb(0 0 0 / 10%) 0px 28px 50px;
}
.owl-item.center {
  z-index: 1;
}
.owl-item:not(.center) > div:hover {
  opacity: .75;
}
.owl-carousel .owl-item img{
    width: 20px !important;

}
.owl-carousel .owl-stage-outer{

    overflow: unset !important;
}
/* carousel  end */

/* dialog / alert */
div#dialog{
    position: fixed;
    width: 100%;
    height: 100%;
    background: transparent;
    display: none;
    transition: all 0.3s;
    top: 0px;
    left: 0px;
}
div#dialog div#box {
    position: fixed;
    border-radius: 20px 20px 0 0;
    left: 50%;
    top: 120%;
    transform: translate(-50%,-100%);
    opacity: 0;
    transition: top 0.3s, opacity 0.5s;
}
div#dialog div#box > div{
  padding: 34px 34px 60px 34px;
  background: white;
}
div#dialog div#box .buttons{
  display: flex;
}
div#dialog div#box button{
  padding: 18px 15px;
}
div#dialog div#box .nao{
    width: 75%;
    margin-right: 10px;
    background: #e9e9eb;
    color: black;
}
div#dialog div#box .nao:hover{
  background: #cccccc;
}
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
  </head>
  <body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.4.0/moment.min.js"></script>
    <script src="http://html2canvas.hertzen.com/dist/html2canvas.js"></script>
    <script src="https://cdn.rawgit.com/plentz/jquery-maskmoney/master/dist/jquery.maskMoney.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <script src="https://rawgit.com/RobinHerbots/jquery.inputmask/3.x/dist/jquery.inputmask.bundle.js"></script>


      <div style="display: block;" id="printContent">
      <div class="logo">
        <h2>MARIO RODRIGUES</h2>
        <h2>DOS SANTOS</h2>
        <h4>PRODUÇÕES</h4>
      </div>

      <div class="dados-pessoais">
        <p>Razão social: Mario Rodrigues dos Santos LTDA</p>
        <p>CNPJ: 45.421.670/0001-10</p>
        <p>Rua: Tiburno, Nº870, Jardim Adelfiori</p>
        <p>Email: mariorodriguessantos139@gmail.com</p>
        <p>Fone: (11) 99463-3063</p>
        <p>DRT-6636/SP</p>
      </div>

      <table id="dados-primarios">
        <tr>
          <td style="width: 110px; text-align: right;">Produtora:</td>
          <td id="m_produtora" style="width: 344px; text-align: left; padding-left: 10px;">teste</td>
          <td style="width: 100px; text-align: right;">Solicitante:</td>
          <td id="m_solicitante" style="width: 219px; text-align: left; padding-left: 10px;">teste</td>
        </tr>
        <tr>
          <td style="width: 110px; text-align: right;">Job:</td>
          <td id="m_job" style="width: 344px; text-align: left; padding-left: 10px;">teste</td>
          <td class="m_valhoratext">Valor hora:</td>
          <td id="m_valorhora">teste</td>
        </tr>
        <tr>
          <td style="width: 110px; text-align: right;">Assist. de set:</td>
          <td style="width: 344px; text-align: left; padding-left: 10px;" colspan="4">Mario Rodrigues</td>
        </tr>
      </table>

      <div class="table-diarias">
      <table id="diarias">
        <tr class="table-auto">
          <th style="width: 130px;">DATA</th>
          <th style="width: 200px;">OCORRÊNCIA</th>
          <th style="width: 165px;">HORA INÍCIO</th>
          <th style="width: 165px;">HORA TERMINO</th>
          <th style="width: 100px;">HORAS</th>
          <th>VALOR</th>
        </tr>
        <tr class="table-prog">
          <th style="width: 90px;">DATA</th>
          <th style="width: 174px;">OCORRÊNCIA</th>
          <th style="width: 106px;">HORA INÍCIO</th>
          <th style="width: 126px;">HORA TERMINO</th>
          <th style="width: 70px;">HORAS</th>
          <th style="width: 117px;">HORAS EXTRA</th>
          <th style="width: 117px;">VALOR EXTRA</th>
          <th>TOTAL</th>
        </tr>
      </table>
    </div>
      <table id="data-minuta">
        <tr>
          <td style="width: 53px; text-align: right;">São Paulo,</td>
          <td id="m_dataminuta" style="width: 344px; text-align: left; padding-left: 5px;">teste</td>
          <td style="width: 53px; text-align: right;">Editar Minuta</td>
        </tr>
      </table>
      </div>

      <div style="display: block;" id="background"></div>

      <form style="display: block;" action="javascript:void(0);" onsubmit="gerarMinuta();" id="formulario">
        <div style="box-shadow: #353739 0px -50em 0px;" class="bt-form__wrapper">
  
          <div class="form_header part">
            <p>MARIO RODRIGUES <br> DOS SANTOS</p>
          </div>
  
          <div class="inf-importantes part">
            <div class="uk-form bt-flabels js-flabels">
              <div class="bt-flabels__wrapper" style="margin-bottom: 20px;">
                <label>Tipo de minuta</label>
                <ul id="d_tipoMinuta">
                  <li id="nav-background"></li>
                  <li id="nav_indicator"></li>
                  <li class="selected" data-type="auto">Automático</li>
                  <li data-type="manu">Manual</li>
                  <li data-type="prog">Progressiva</li>
                </ul>              
              </div>
  
              <div class="bt-flabels__wrapper">
                <label>Produtora</label>
                <input onkeyup="saveInputs(this)" type="text" name="Produtora" id="d_produtora" autocomplete="off" required />
              </div>
              <div class="bt-flabels__wrapper bt-flabels--right">
                <label>Solicitante</label>
                <input onkeyup="saveInputs(this)" type="text" name="Solicitante" id="d_solicitante" autocomplete="off" required />
              </div>
              <div class="bt-flabels__wrapper bt-flabels--right">
                <label>Job</label>
                <input onkeyup="saveInputs(this)" type="text" name="Job" id="d_job" autocomplete="off" required />
              </div>
  
              <div class="uk-grid uk-grid-collapse">
                <div class="uk-width-1-2 valor-hora">
                  <div class="bt-flabels__wrapper bt-flabels--right">
                    <label>Valor hora</label>
                    <input onkeyup="saveInputs(this)" type="money" name="ValorHora" id="d_valorhora" placeholder="R$0,00" required />
                  </div>
                </div>
                <div class="uk-width-1-2 minima-hora">
                  <div class="bt-flabels__wrapper bt-flabels--right">
                    <label>Minímo de hora</label>
                    <input type="maksTime" name="MinHora" id="d_minhora"  inputmode="numeric" placeholder="__:__" required />
                  </div>
                </div>
                <div class="uk-width-1-2 hora-extra">
                  <div class="bt-flabels__wrapper bt-flabels--right">
                    <label>Hora extra</label>
                    <input onkeyup="saveInputs(this)" type="porcentage" name="HoraExtra" id="d_horaextra" placeholder="%100" required />
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="diarias part">
            <div style="padding: 0px;margin-bottom: 30px;" class="part-title uk-form bt-flabels">
              <p>Diarias</p>
              <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGlkPSJMYXllcl8xIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIGZpbGw9IiM0NDQ0NDQiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDMyIDMyIiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48cGF0aCBkPSJNMjgsMTRIMThWNGMwLTEuMTA0LTAuODk2LTItMi0ycy0yLDAuODk2LTIsMnYxMEg0Yy0xLjEwNCwwLTIsMC44OTYtMiwyczAuODk2LDIsMiwyaDEwdjEwYzAsMS4xMDQsMC44OTYsMiwyLDIgIHMyLTAuODk2LDItMlYxOGgxMGMxLjEwNCwwLDItMC44OTYsMi0yUzI5LjEwNCwxNCwyOCwxNHoiLz48L3N2Zz4=" onclick="addiaria();" style="background: white; padding: 7px; border-radius: 50%; width: 38px;box-shadow: rgb(0 0 0) 0px 8px 30px -10px;" alt="">
            </div>
            <div class="owl-carousel">
              <!-- diarias -->
            </div>
          </div>
          
          <div class="finalizacao part">
            <div class="uk-form bt-flabels js-flabels">
              <div class="bt-flabels__wrapper">
                <label>Observações</label>
                <textarea onkeyup="saveInputs(this)" type="text" name="Observacao" id="d_observacoes" placeholder="Escreva aqui..." autocomplete="off"></textarea>
              </div>
              <div class="bt-flabels__wrapper">
                <label>Data da minuta</label>
                <input oninput="saveInputs(this)" type="date" id="d_dataminuta" name="DataMinuta" autocomplete="off" required/>
              </div>
            </div>
          </div>
        </div>
      </form>

      <div style="display: block;" id="send-form">
        <div class="bt-form__wrapper">
          <div class="part">
            <div class="uk-form bt-flabels js-flabels">
              <div class="bt-flabels__wrapper">
                  <button onclick="resetMinuta();" class="elbtn"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="white" viewBox="0 0 24 24"><path d="M20.944 12.979c-.489 4.509-4.306 8.021-8.944 8.021-2.698 0-5.112-1.194-6.763-3.075l1.245-1.633c1.283 1.645 3.276 2.708 5.518 2.708 3.526 0 6.444-2.624 6.923-6.021h-2.923l4-5.25 4 5.25h-3.056zm-15.864-1.979c.487-3.387 3.4-6 6.92-6 2.237 0 4.228 1.059 5.51 2.698l1.244-1.632c-1.65-1.876-4.061-3.066-6.754-3.066-4.632 0-8.443 3.501-8.941 8h-3.059l4 5.25 4-5.25h-2.92z"/></svg></button>
                  <button type="submit" form="formulario" class="elbtn">GERAR MINUTA</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div style="display: block;"  id="mindownload">

        <div id="close-pdfdownload" style="display: none;" onclick="closePDFDOWN();">
        </div>

        <div class="lds-ring"><div></div><div></div><div></div></div>

        <div class="bt-form__wrapper">
          <div class="part">
            <div class="part-title uk-form bt-flabels">
              <p>Exportar</p>
              <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGZpbGw9IiM0NDQiIGlkPSJMYXllcl8xIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PHBhdGggZD0iTTQzNy41LDM4Ni42TDMwNi45LDI1NmwxMzAuNi0xMzAuNmMxNC4xLTE0LjEsMTQuMS0zNi44LDAtNTAuOWMtMTQuMS0xNC4xLTM2LjgtMTQuMS01MC45LDBMMjU2LDIwNS4xTDEyNS40LDc0LjUgIGMtMTQuMS0xNC4xLTM2LjgtMTQuMS01MC45LDBjLTE0LjEsMTQuMS0xNC4xLDM2LjgsMCw1MC45TDIwNS4xLDI1Nkw3NC41LDM4Ni42Yy0xNC4xLDE0LjEtMTQuMSwzNi44LDAsNTAuOSAgYzE0LjEsMTQuMSwzNi44LDE0LjEsNTAuOSwwTDI1NiwzMDYuOWwxMzAuNiwxMzAuNmMxNC4xLDE0LjEsMzYuOCwxNC4xLDUwLjksMEM0NTEuNSw0MjMuNCw0NTEuNSw0MDAuNiw0MzcuNSwzODYuNnoiLz48L3N2Zz4=" onclick="closePDFDOWN();" alt="">
            </div>
            <div class="uk-form bt-flabels js-flabels">
              <div class="bt-flabels__wrapper">
                <img src="" id="minuta-demo" alt="">
            </div>
              <div style="margin-top:20px;" class="bt-flabels__wrapper">

                  <a id="down-min_pdf" class="elbtn" target="_blank" href="">PDF</a>

                  <a id="down-min_img" class="elbtn" target="_blank" href="">IMAGEM</a>

              </div>
            </div>
          </div>
        </div>

      </div>

      <div id="dialog">

        <div class="bt-form__wrapper" id="box">

                  <div class="part">
                    <h2 style="margin: 0;font-weight: 600;font-size: 30px;">Alerta!</h2>
                    <p style="margin: 6px 0px 20px 0px;">text</p>
                    <div class="buttons">
                      <button class="nao elbtn">CANCELAR</button>
                      <button class="sim elbtn">REMOVER</button>
                    </div>
                  </div>

        </div>

      </div>

    <script>

      let hrefG = window.atob( window.location.search.replace('?', '') )
      if(hrefG != ''){
        localStorage.removeItem('testObject');
        localStorage.setItem('testObject', JSON.stringify(JSON.parse(hrefG)));
      }

      let gerador = JSON.parse(localStorage.getItem('testObject')) || {
      	Tipo: '',
      	Produtora: '',
      	Solicitante: '',
      	Job: '',
      	ValorHora: '',
      	MinHora: '',
      	HoraExtra: '',
      	Diarias: [], 
      	Observacao: '',
      	DataMinuta: '',
      };

      function printPDF() {
      	let elem = document.getElementById("printContent");
      	elem.style.cssText = "display: block;";

      	html2canvas(elem, {
      		height: 602,
      		width: 1024,
      		scale: 2
      	}).then(function(canvas) {
      		// document.body.appendChild(canvas);
      		var wid;
      		var hgt;
      		var img = canvas.toDataURL("image/png", (wid = canvas.width), (hgt = canvas.height));
      		var hratio = hgt / wid;
      		var doc = new jsPDF("l", "px", [1024, 600]); // os numeros em [] define o tamanho do pdf
      		var width = doc.internal.pageSize.width;
      		var height = width * hratio;
      		doc.addImage(img, "JPEG", 0, 0, width, height, undefined,'FAST');

          // doc.textWithLink('Hello World!', (width-100), (height-50), {url: 'https://www.example.com/'});


doc.link(width-30, height-64, 90, 1, {url: window.location.origin+window.location.pathname+'?'+window.btoa(JSON.stringify(gerador)) });


// async function getUser(){
//   const response = await fetch(doc.output("bloburl"));
//   const buffer = await response.arrayBuffer();

//   const pdf = new File([buffer], "hello.pdf", { type: "application/pdf" });
//   const files = [pdf];

//   // Share PDF file if supported.
//   if (navigator.canShare({ files })) await navigator.share({ files });
// };
// getUser();


      		document.querySelector('#minuta-demo').src = img;

      		let getDateMin = new Date(document.querySelector('#d_dataminuta').value) || "_",
      			  getJobMin = document.querySelector('#d_job').value || "_";

      		fetch(doc.output("datauristring")).then(resp => resp.arrayBuffer()).then(resp => {
      			const file = new Blob([resp], {
      				type: 'application/pdf'
      			});
      			const fileURL = URL.createObjectURL(file);
      			const link = document.getElementById("down-min_pdf");
      			link.href = fileURL;
      			 
      		});

      		fetch(img).then(resp => resp.arrayBuffer()).then(resp => {
      			const file = new Blob([resp], {
      				type: 'image/jpeg'
      			});
      			const fileURL = URL.createObjectURL(file);
      			const link = document.getElementById("down-min_img");
      			link.href = fileURL;
      			link.download = ((addzero(getDateMin.getDate()) )) + "-" + (addzero(getDateMin.getMonth() + 1)) + "-" + getDateMin.getFullYear() + " JOB " + getJobMin;
      			// link.download = "FileName" + new Date() + ".pdf";
      		});

      		document.querySelector('#mindownload .bt-form__wrapper').style.cssText = "display: block;";
      		setTimeout(function() {
      			document.querySelector('#mindownload .bt-form__wrapper').style.cssText += "top: calc(100% - 480px)";
      			document.querySelector('#mindownload .lds-ring').style.cssText = "display: none;";
      			document.querySelector('#close-pdfdownload').style.cssText = "display: block;";
      		}, 300);

      	});

      }


      function gerarMinuta() {
      	document.querySelector('#formulario').style.cssText = "position: fixed;overflow: hidden;";
      	document.querySelector('#formulario .bt-form__wrapper').style.cssText += "filter: brightness(0.4);";
      	document.querySelector('#send-form').style.cssText = "filter: brightness(0.4);";
      	document.querySelector('#mindownload .lds-ring').style.cssText = "display: block;";

      	// limpar diarias
      	for (var i = 0; i < 9; i++) {
      		if (document.querySelectorAll('table#diarias tr').length > 2) {
      			document.querySelectorAll('table#diarias tr')[2].remove();
      		} else {}
      	}
      	// limpar diarias end


      	// INFO

      	let prod         = $("#d_produtora").val(),
      		  job          = $("#d_job").val(),
      	  	sol          = $("#d_solicitante").val(),
      		  valh         = $("#d_valorhora").maskMoney("unmasked")[0],
      		  obs          = $("#d_observacoes").val() || " ",
      		  datam        = $("#d_dataminuta").val();
      	    min_hora     = $('#d_minhora').inputmask('unmaskedvalue'),
      		  hora_extra   = (($("#d_horaextra").maskMoney("unmasked")[0] * 10 * valh) + valh);
      	    tipodeminuta = $('#d_tipoMinuta .selected').data('type');

      	const meses = ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"];
      	let data = new Date(moment(datam));
      	let dataFormatada = data.getDate() + " de " + meses[data.getMonth()] + " de " + data.getFullYear();

      	$("#m_produtora").html(prod);
      	$("#m_job").html(job);
      	$("#m_solicitante").html(sol);
      	$("#m_valorhora").html(valh.toLocaleString("pt-br", {
      		style: "currency",
      		currency: "BRL"
      	}));
      	$("#m_dataminuta").html(dataFormatada);

      	// INFO END

      	let totalM = [];
      	// DIARIAS
      	for (var i = 0; i < 8; i++) {
      		if (i < document.querySelectorAll(".diaria").length) {

      			let data_inicio = $(document.querySelectorAll("#d_inicio")[i]).inputmask('unmaskedvalue'),
      				data_termino = $(document.querySelectorAll("#d_termino")[i]).inputmask('unmaskedvalue'),
      				data_diaria = addzero(data_inicio.getDate()) + "/" + addzero(data_inicio.getMonth() + 1) + "/" + data_inicio.getFullYear(),
      				ocorrencia = document.querySelectorAll("#d_ocorrencia")[i].value,
      				data_valor = document.querySelectorAll("#d_valor")[i].value.replace(/[^\d,]/g, '').replace(',', '.') * 1,
      				inicio = addzero(data_inicio.getDate()) + "/" + addzero(data_inicio.getMonth() + 1) + "/" + data_inicio.getFullYear() == addzero(data_termino.getDate()) + "/" + addzero(data_termino.getMonth() + 1) + "/" + data_termino.getFullYear() ?
      				addzero(data_inicio.getHours()) + ":" + addzero(data_inicio.getMinutes()) :
      				addzero(data_inicio.getDate()) + "/" + addzero(data_inicio.getMonth() + 1) + " " + addzero(data_inicio.getHours()) + ":" + addzero(data_inicio.getMinutes()),
      				termino = addzero(data_inicio.getDate()) + "/" + addzero(data_inicio.getMonth() + 1) + "/" + data_inicio.getFullYear() == addzero(data_termino.getDate()) + "/" + addzero(data_termino.getMonth() + 1) + "/" + data_termino.getFullYear() ?
      				addzero(data_termino.getHours()) + ":" + addzero(data_termino.getMinutes()) :
      				addzero(data_termino.getDate()) + "/" + addzero(data_termino.getMonth() + 1) + " " + addzero(data_termino.getHours()) + ":" + addzero(data_termino.getMinutes());

      			var ms = moment(data_termino).diff(moment(data_inicio));
      			var d = moment.duration(ms);
      			var horas = Math.floor(d.asHours()) + moment.utc(ms).format(":mm");
      			var horasextra = Math.floor(Math.max(0, d.asHours() - min_hora)) + moment.utc(ms).format(":mm");

      			if (tipodeminuta == "auto") {
      				document.querySelector("#diarias").innerHTML +=
      					"<tr> <td>" +
      					data_diaria +
      					"</td> <td>" +
      					ocorrencia +
      					"</td> <td>" +
      					inicio +
      					"</td> <td>" +
      					termino +
      					"</td> <td>" +
      					horas +
      					"</td> <td>" +
      					Math.max((min_hora * valh), (d.asHours() * valh)).toLocaleString("pt-br", {
      						style: "currency",
      						currency: "BRL"
      					}) +
      					"</td> </tr>";
      				totalM.push(Math.max((min_hora * valh), (d.asHours() * valh)));
      			}
      			if (tipodeminuta == "manu") {
      				document.querySelector("#diarias").innerHTML +=
      					"<tr> <td>" +
      					data_diaria +
      					"</td> <td>" +
      					ocorrencia +
      					"</td> <td>" +
      					inicio +
      					"</td> <td>" +
      					termino +
      					"</td> <td>" +
      					horas +
      					"</td> <td>" +
      					data_valor.toLocaleString("pt-br", {
      						style: "currency",
      						currency: "BRL"
      					}) +
      					"</td> </tr>";
      				totalM.push(data_valor);
      			}
      			if (tipodeminuta == "prog") {
      				document.querySelector('#diarias').innerHTML += "<tr> <td>" + data_diaria + "</td> <td>" + ocorrencia + "</td> <td>" + inicio + "</td> <td>" + termino + "</td> <td>" + horas + "</td> <td>" + horasextra + "</td> <td>" + ((Math.max(0, d.asHours() - min_hora)) * hora_extra).toLocaleString("pt-br", {
      					style: "currency",
      					currency: "BRL"
      				}) + "</td> <td>" + ((min_hora * valh) + ((Math.max(0, d.asHours() - min_hora)) * hora_extra)).toLocaleString("pt-br", {
      					style: "currency",
      					currency: "BRL"
      				}) + "</td> </tr>";

      				totalM.push(((min_hora * valh) + ((Math.max(0, d.asHours() - min_hora)) * hora_extra)));
      			}
      		} else {
      			if (tipodeminuta == "auto" || tipodeminuta == "manu") {
      				document.querySelector("#diarias").innerHTML += '<tr style="color: transparent !important;"> <td>a</td> <td>a</td> <td>a</td> <td>a</td> <td>a</td> <td>a</td> </tr>';
      			}
      			if (tipodeminuta == "prog") {
      				document.querySelector("#diarias").innerHTML += '<tr style="color: transparent !important;"> <td>a</td> <td>a</td> <td>a</td> <td>a</td> <td>a</td> <td>a</td><td>a</td><td>a</td> </tr>';
      			}
      		}
      	}

        var colspann = (tipodeminuta ==="prog") ? 5:4;
        const totalval = totalM.reduce((totalM, currentElement) => totalM + currentElement);
        document.querySelector("#diarias").innerHTML +=
          '<tr> <td style="border-bottom:none; text-align: left; padding: 10px;" colspan="'+colspann+'">' + obs + '</td> <td id="m_total" style="border: none;" colspan="3">TOTAL ' + totalval.toLocaleString("pt-br", { style: "currency", currency: "BRL" }) + "</td> </tr>";
      	// DIARIAS END


      	printPDF();
        saveInputs();  
      }


      function addiaria(mode) {
      	let width = document.querySelector('.diarias .part-title').offsetWidth;

      	var input =
      		'<div style="width:' + width + 'px;" class="diaria"><div class="contagem_diarias"><h4><i>' +
      		(document.querySelectorAll(".diaria").length + 1) +
      		'</i>ª Diaria</h4> <img onclick="removediaria(this);" class="remove-diaria" src="data:image/svg+xml;base64,DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkNhcGFfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSI3NzQuMjY2cHgiIHZpZXdCb3g9IjAgMCA3NzQuMjY2IDc3NC4yNjYiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDc3NC4yNjYgNzc0LjI2NjtmaWxsOiBibGFjazsiDQoJIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KCTxnPg0KCQk8cGF0aCBkPSJNNjQwLjM1LDkxLjE2OUg1MzYuOTcxVjIzLjk5MUM1MzYuOTcxLDEwLjQ2OSw1MjYuMDY0LDAsNTEyLjU0MywwYy0xLjMxMiwwLTIuMTg3LDAuNDM4LTIuNjE0LDAuODc1DQoJCQlDNTA5LjQ5MSwwLjQzOCw1MDguNjE2LDAsNTA4LjE3OSwwSDI2NS4yMTJoLTEuNzRoLTEuNzVjLTEzLjUyMSwwLTIzLjk5LDEwLjQ2OS0yMy45OSwyMy45OTF2NjcuMTc5SDEzMy45MTYNCgkJCWMtMjkuNjY3LDAtNTIuNzgzLDIzLjExNi01Mi43ODMsNTIuNzgzdjM4LjM4N3Y0Ny45ODFoNDUuODAzdjQ5MS42YzAsMjkuNjY4LDIyLjY3OSw1Mi4zNDYsNTIuMzQ2LDUyLjM0Nmg0MTUuNzAzDQoJCQljMjkuNjY3LDAsNTIuNzgyLTIyLjY3OCw1Mi43ODItNTIuMzQ2di00OTEuNmg0NS4zNjZ2LTQ3Ljk4MXYtMzguMzg3QzY5My4xMzMsMTE0LjI4Niw2NzAuMDA4LDkxLjE2OSw2NDAuMzUsOTEuMTY5eg0KCQkJIE0yODUuNzEzLDQ3Ljk4MWgyMDIuODR2NDMuMTg4aC0yMDIuODRWNDcuOTgxeiBNNTk5LjM0OSw3MjEuOTIyYzAsMy4wNjEtMS4zMTIsNC4zNjMtNC4zNjQsNC4zNjNIMTc5LjI4Mg0KCQkJYy0zLjA1MiwwLTQuMzY0LTEuMzAzLTQuMzY0LTQuMzYzVjIzMC4zMmg0MjQuNDMxVjcyMS45MjJ6IE02NDQuNzE1LDE4Mi4zMzlIMTI5LjU1MXYtMzguMzg3YzAtMy4wNTMsMS4zMTItNC44MDIsNC4zNjQtNC44MDINCgkJCUg2NDAuMzVjMy4wNTMsMCw0LjM2NSwxLjc0OSw0LjM2NSw0LjgwMlYxODIuMzM5eiIvPg0KCQk8cmVjdCB4PSI0NzUuMDMxIiB5PSIyODYuNTkzIiB3aWR0aD0iNDguNDE4IiBoZWlnaHQ9IjM5Ni45NDIiLz4NCgkJPHJlY3QgeD0iMzYzLjM2MSIgeT0iMjg2LjU5MyIgd2lkdGg9IjQ4LjQxOCIgaGVpZ2h0PSIzOTYuOTQyIi8+DQoJCTxyZWN0IHg9IjI1MS42OSIgeT0iMjg2LjU5MyIgd2lkdGg9IjQ4LjQxOCIgaGVpZ2h0PSIzOTYuOTQyIi8+DQoJPC9nPg0KPC9zdmc+DQo=" width="20px" height="20px"/></div> <div class="uk-form bt-flabels js-flabels"> <div class="bt-flabels__wrapper"><label>Início</label> <input name="Inicio" type="dtime" inputmode="numeric" onfocus="detectDiaria(this);" placeholder="__/__/____ __:__" id="d_inicio" autocomplete="off" required /></div> <div class="bt-flabels__wrapper bt-flabels--right"><label>Termino</label> <input name="Termino" type="dtime" inputmode="numeric" onfocus="detectDiaria(this);" placeholder="__/__/____ __:__" id="d_termino" autocomplete="off" required /></div> <div class="bt-flabels__wrapper"><label>Ocorrência</label> <input onkeyup="saveInputs(this)" type="text" onfocus="detectDiaria(this);" id="d_ocorrencia" name="Ocorrencia" placeholder="Escreva aqui..." autocomplete="off" required /></div> <div class="bt-flabels__wrapper valor-diaria"><label>Valor</label> <input onkeyup="saveInputs(this)" type="money" onfocus="detectDiaria(this);" id="d_valor" name="Valor" placeholder="R$0,00" autocomplete="off" required /></div> </div></div> </div>';


      	if ($(".diaria").length < 8) {
      		distroy();
      		$owl.append(input)
      		atualN();
      		tipoMinuta();
      		formatInput();

          if(mode == null){
            gerador.Diarias.push({
              Inicio: '',
              Termino: '',
              Ocorrencia: '',
              Valor: '',
            });
          }

      		if ($(".diaria").length == 1) {
      			$('.diaria .remove-diaria').remove();
      		}else{
            saveInputs();
          }

      			build($('.remove-item').length - 1)

      	}

      }


      function tipoMinuta() {
      	var type = document.querySelector('#d_tipoMinuta').querySelector('.selected').getAttribute('data-type'),
      		diaria = document.querySelectorAll('.diaria');
      	// diarias
      	for (var i = 0; i < diaria.length; i++) {
      		if (type == "auto" || type == "prog") {
      			diaria[i].querySelector('.valor-diaria').style.cssText = "display: none;"
      			diaria[i].querySelector('#d_valor').required = false;
      		}
      		if (type == "manu") {
      			diaria[i].querySelector('.valor-diaria').style.cssText = "display: flex;"
      			diaria[i].querySelector('#d_valor').required = true;
      		}
      	}

      	if (type == "auto") {
      		document.querySelector('.minima-hora').style.cssText = " ";
      		document.querySelector('.hora-extra').style.cssText = "display: none;";
      		document.querySelector('#d_minhora').required = true;
      		document.querySelector('#d_horaextra').required = false;
      		document.querySelector('.table-auto').style.cssText = " ";
      		document.querySelector('.table-prog').style.cssText = "display: none;";
      		document.querySelector('.valor-hora').style.cssText = " ";
      		document.querySelector('#d_valorhora').required = true;
      		document.querySelector('#m_valorhora').style.cssText = "";
      		document.querySelector('.m_valhoratext').style.cssText = "";
      	}
      	if (type == "manu") {
      		document.querySelector('.minima-hora').style.cssText = "display: none;";
      		document.querySelector('.hora-extra').style.cssText = "display: none;";
      		document.querySelector('.valor-hora').style.cssText = "display: none;";
      		document.querySelector('#d_valorhora').required = false;
      		document.querySelector('#d_minhora').required = false;
      		document.querySelector('#d_horaextra').required = false;
      		document.querySelector('.table-auto').style.cssText = " ";
      		document.querySelector('.table-prog').style.cssText = "display: none;";
      		document.querySelector('#m_valorhora').style.cssText = "color: white!important;";
      		document.querySelector('.m_valhoratext').style.cssText = "color: white!important;";
      	}
      	if (type == "prog") {
      		document.querySelector('.minima-hora').style.cssText = " ";
      		document.querySelector('.hora-extra').style.cssText = "width: 100%;";
      		document.querySelector('#d_minhora').required = true;
      		document.querySelector('#d_horaextra').required = true;
      		document.querySelector('.table-auto').style.cssText = "display: none;";
      		document.querySelector('.table-prog').style.cssText = " ";
      		document.querySelector('.valor-hora').style.cssText = " ";
      		document.querySelector('#d_valorhora').required = true;
      		document.querySelector('#m_valorhora').style.cssText = "";
      		document.querySelector('.m_valhoratext').style.cssText = "";
      	}
      }


      function removediaria(el) {
        var n = $(el).parent().parent().data("position") * 1;

        dialog('Deseja remover '+(n+1)+'ª Diaria? Está ação não podera ser desfeita!','REMOVER', function() {
      		distroy();
      		$(el).parent().parent().remove();
      		atualN();

          removeArray(gerador['Diarias'], gerador['Diarias'][n]);
          saveInputs();

      		build(n - 1);

      		for (var i = 0; i < document.querySelectorAll(".diaria").length; i++) {
      			document.querySelectorAll(".diaria")[i].querySelector("i").innerHTML = i + 1;
      		}

        }, function() {
          return null
        })
      }


      function formatInput() {
      	$(function() {
      		$("[type=money]").maskMoney({
      			thousands: ".",
      			decimal: ",",
      			prefix: "R$",
      		});
      	});

      	$('input[type="dtime"]').inputmask("datetime", {
      		inputFormat: "dd-mm-yyyy HH:MM",
      		placeholder: "_",
      		leapday: "-02-29",
      		alias: "tt.mm.jjjj",
      		autoUnmask: false,
      		clearMaskOnLostFocus: true,
      		outputFormat: "yyyy-mm-dd",
      		clearIncomplete: true,
      		showMaskOnHover: false,
      		onUnMask: function(maskedValue, date) {
      			let a$ = []
      			for (var i = 0; i < (date.length / 2); i++) {
      				a$.push(date.slice((i * 2), ((i + 1) * 2)))
      			}
      			let validDate = a$[2] + a$[3] + '-' + a$[1] + '-' + a$[0] + 'T' + a$[4] + ':' + a$[5];
      			return new Date(validDate);
      		},
      		onincomplete: function() {
      			let elem = this;
      			$(elem).addClass('bt-flabels__error')
      			setTimeout(function() {
      				$(elem).removeClass('bt-flabels__error')
      			}, 2000);
      		},
          oncomplete: function () {
            saveInputs(this);
          },
      	});

      }


      function closePDFDOWN() {
      	document.querySelector('#mindownload .bt-form__wrapper').style.cssText += "top: 120%;";
      	document.querySelector('#close-pdfdownload').style.cssText = "display: none;"
      	document.querySelector('#formulario .bt-form__wrapper').style.cssText += "filter: none;";
      	document.querySelector('#send-form').style.cssText = "filter: none";
      	setTimeout(function() {
      		$('#mindownload .bt-form__wrapper').css('display', 'none')
      		document.querySelector('#formulario').style.cssText = "overflow: none;position: absolute;";
      	}, 200);
      }


      function detectDiaria(el) {
      	let posAtual = document.querySelector('.owl-item.active > div').getAttribute('data-position') * 1,
      		focusPos = el.parentElement.parentElement.parentElement.getAttribute('data-position') * 1;

      	if (posAtual == focusPos) {
      		console.log('nada')
      		return;
      	} else {
      		distroy();
      		build(focusPos);
      	}

      }

      var timeoutId;
      function saveInputs(element) {
          
        if(element != null){
          let val  = element.value,
              type = element.getAttribute('name');

          if(element.parentElement.parentElement.parentElement.className == 'diaria'){
            gerador['Diarias'][element.parentElement.parentElement.parentElement.getAttribute('data-position') * 1][type] = val
          }else{
            gerador[type] = val;
          }
        }
        
          clearTimeout(timeoutId);
          timeoutId = setTimeout(function() {
            localStorage.removeItem('testObject');
            localStorage.setItem('testObject', JSON.stringify(gerador));
            console.log('save');
          }, 1000);

      }


      function setValInputs() {
        
        if(localStorage.getItem('testObject') === null || JSON.parse(localStorage.getItem('testObject'))['Diarias'].length === 0){
            gerador.Diarias.push({
              Inicio: '',
              Termino: '',
              Ocorrencia: '',
              Valor: '',
            });
          }

          Object.keys(gerador).forEach(function (name,n) {
            if(name === "Diarias" || name === "Tipo"){
              console.log("nao é input");

              if(name === "Diarias"){
                gerador['Diarias'].forEach(function (obj,n) {
                  addiaria(true);
                  document.querySelectorAll('#d_inicio')[n].value = obj['Inicio'];
                  document.querySelectorAll('#d_termino')[n].value = obj['Termino'];
                  document.querySelectorAll('#d_ocorrencia')[n].value = obj['Ocorrencia'];
                  document.querySelectorAll('#d_valor')[n].value = obj['Valor'];
                })
              }

            }else{
              document.getElementsByName(name)[0].value = gerador[name];
              console.log("é input");
            }
          });

      }


      
      function resetMinuta() {

        dialog('Deseja resetar os dados dessa minuta?', 'RESETAR', function () {

          Object.keys(gerador).forEach(function (name,n) {
          if(name == "MinHora" || name == "ValorHora" || name == "HoraExtra" || name == "Diarias"){ 
            if(name == "Diarias"){
              gerador[name] = [];
            }
            return null;

            }else{
              gerador[name] = '';
            }
          });

          localStorage.removeItem('testObject');
          localStorage.setItem('testObject', JSON.stringify(gerador));
          window.open(window.location.href.replace(window.location.search, ''),"_self")

        }, function() {
          return null
        })

      }



      function removeArray(arr, value) {
        var index = arr.indexOf(value);
        if (index > -1) {
           arr.splice(index, 1);
        }
        return arr;
      }


      function addzero(n) {
      	return n < 10 ? "0" + n : n;
      }

      var $owl = $('.owl-carousel');

      // $(document).on('click', '.owl-item>div', function() {
      //   // see https://owlcarousel2.github.io/OwlCarousel2/docs/api-events.html#to-owl-carousel
      //   var $speed = 300;  // in ms
      //   $owl.trigger('to.owl.carousel', [$(this).data( 'position' ), $speed] );
      // });

      function distroy() {
      	$owl.owlCarousel('destroy');
      }

      function build(start) {
      	$owl.owlCarousel({
      		center: true,
      		loop: false,
      		items: 3,
      		startPosition: start,
      		autoWidth: true,
      	});

      	// var $speed = 300;  // in ms
      	// $owl.trigger('to.owl.carousel', [start, $speed] );
      }

      function atualN() {
      	$owl.children().each(function(index) {
      		$(this).attr('data-position', index); // NB: .attr() instead of .data()
      	});
      }



      function dialog(message, btntitle, yesCallback, noCallback) {
        
        function closeDialog() {
          document.querySelector('#dialog').style.cssText += 'opacity: 0;';
          document.body.style.cssText = '';
          
          setTimeout(function() {
            document.querySelector('#dialog').style.cssText = '';
            document.querySelector('#dialog #box').style.cssText = '';
      	  }, 300);
        }

        document.querySelector('#dialog #box p').innerHTML = message;
        document.querySelector('#dialog #box .sim').innerHTML = btntitle||'SIM';

        document.querySelector('#dialog').style.cssText = 'display: block;';
        document.body.style.cssText = 'overflow-y: hidden;';
        setTimeout(function() {
          document.querySelector('#dialog').style.cssText += 'background: #00000075;';
          document.querySelector('#dialog #box').style.cssText = 'top: 100%;opacity: 1;'
      	}, 10);

            
        $('#dialog #box .sim').click(function() {
          $(this).off('click');
          $('#dialog #box .nao').off('click');

          closeDialog();
          yesCallback();
        });

        $('#dialog #box .nao').click(function() {
          $(this).off('click');
          $('#dialog #box .sim').off('click');

          closeDialog();
          noCallback();
        });

      }



      $(document).ready(function() {

      	var handle = function(el) {
      		var $el = $(el)
      		$el
      			.addClass("selected")
      			.siblings()
      			.removeClass("selected")

      		$("#nav_indicator")
      			.css("left", $el.position().left + "px")
      			.css("width", $el.width() + "px")
      			.css("padding-left", $el.css("padding-left"))
      			.css("padding-right", $el.css("padding-right"))

          gerador['Tipo'] = $('#d_tipoMinuta > li.selected').data('type');
          saveInputs();
      	}

      	// Click handler
      	$("ul#d_tipoMinuta > li").on("click", function(event) {
      		handle(this)
      		tipoMinuta()
      	})

      	if(gerador['Tipo'] == ''){
          $("ul#d_tipoMinuta > li[data-type='auto']").click();
        }else{
          $("ul#d_tipoMinuta > li[data-type='"+gerador["Tipo"]+"']").click();
        }

      })

      $(function() {
      	$("[type=porcentage]").maskMoney({
      		thousands: "",
      		decimal: "",
      		prefix: "%",
      		precision: 0,
      	});
      });

      $('input[type="maksTime"]').inputmask("99:99", {
      	inputFormat: "99:99",
      	placeholder: "_",
      	alias: "99:99",
      	autoUnmask: false,
      	clearMaskOnLostFocus: true,
      	clearIncomplete: true,
      	showMaskOnHover: false,
      	onUnMask: function(maskedValue, unmaskedValue) {
      		var hoursMinutes = maskedValue.split(/[.:]/);
      		var hours = parseInt(hoursMinutes[0], 10);
      		var minutes = hoursMinutes[1] ? parseInt(hoursMinutes[1], 10) : 0;
      		return hours + minutes / 60;
      	},
      	onincomplete: function() {
      		let elem = this;
      		$(elem).addClass('bt-flabels__error')
      		setTimeout(function() {
      			$(elem).removeClass('bt-flabels__error')
      		}, 2000);
      	},
        oncomplete: function () {
            saveInputs(this);
          },
      });

      setValInputs();

    </script>
  </body>
</html>
